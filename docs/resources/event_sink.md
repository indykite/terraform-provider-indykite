---
# generated by https://github.com/hashicorp/terraform-plugin-docs with custom templates
page_title: "indykite_event_sink Resource - IndyKite"
subcategory: ""
description: |-
  Event Sink configuration is used to configure outbound events.

  	There can be only one configuration per AppSpace (Project).

  	Outbound events are designed to notify external systems about important changes within
  	the IndyKite Knowledge Graph (IKG).

  	These external systems may require real-time synchronization or need to react to
  	changes occurring in the platform.

  Supported filters
  | **Method** | **Event Type** | **Key** | **Value (example)** |
  | --- | --- | --- | --- |
  |  | **Ingest Events** |  |  |
  | **BatchUpsertNodes** | indykite.audit.capture.upsert.node | captureLabel | Car |
  |  |  | captureLabel | Green |
  | **BatchUpsertRelationships** | indykite.audit.capture.upsert.relationship | captureLabel | RENT |
  | **BatchDeleteNodes** | indykite.audit.capture.delete.node | captureLabel | Car |
  |  |  | captureLabel | Green |
  | **BatchDeleteRelationships** | indykite.audit.capture.delete.relationship | captureLabel | RENT |
  | **BatchDeleteNodeProperties** | indykite.audit.capture.delete.node.property |  |  |
  | **BatchDeleteRelationshipProperties** | indykite.audit.capture.delete.relationship.property |  |  |
  | **BatchDeleteNodeTags** | indykite.audit.capture.delete.node.tag | captureLabel | Car |
  |  |  | captureLabel | Green |
  |  | **Configuration Events** |  |  |
  | Config | indykite.audit.config.create |  |  |
  |  | indykite.audit.config.read |  |  |
  |  | indykite.audit.config.update |  |  |
  |  | indykite.audit.config.delete |  |  |
  |  | indykite.audit.config.permission.assign |  |  |
  |  | indykite.audit.config.permission.revoke |  |  |
  |  | **Token Events** |  |  |
  | TokenIntrospect | indykite.audit.credentials.token.introspected |  |  |
  |  | **Authorization Events** |  |  |
  | Authorization | indykite.audit.authorization.isauthorized |  |  |
  |  | indykite.audit.authorization.whatauthorized |  |  |
  |  | indykite.audit.authorization.whoauthorized |  |  |
  |  | **Ciq Events** |  |  |
  | Ciq | indykite.audit.ciq.execute |  |  |
  |  |  |  |  |
---

# indykite_event_sink (Resource)

Event Sink configuration is used to configure outbound events.

		There can be only one configuration per AppSpace (Project).

		Outbound events are designed to notify external systems about important changes within
		the IndyKite Knowledge Graph (IKG).

		These external systems may require real-time synchronization or need to react to
		changes occurring in the platform.


## Supported filters

| **Method** | **Event Type** | **Key** | **Value (example)** |
| --- | --- | --- | --- |
|  | **Ingest Events** |  |  |
| **BatchUpsertNodes** | indykite.audit.capture.upsert.node | captureLabel | Car |
|  |  | captureLabel | Green |
| **BatchUpsertRelationships** | indykite.audit.capture.upsert.relationship | captureLabel | RENT |
| **BatchDeleteNodes** | indykite.audit.capture.delete.node | captureLabel | Car |
|  |  | captureLabel | Green |
| **BatchDeleteRelationships** | indykite.audit.capture.delete.relationship | captureLabel | RENT |
| **BatchDeleteNodeProperties** | indykite.audit.capture.delete.node.property |  |  |
| **BatchDeleteRelationshipProperties** | indykite.audit.capture.delete.relationship.property |  |  |
| **BatchDeleteNodeTags** | indykite.audit.capture.delete.node.tag | captureLabel | Car |
|  |  | captureLabel | Green |
|  | **Configuration Events** |  |  |
| Config | indykite.audit.config.create |  |  |
|  | indykite.audit.config.read |  |  |
|  | indykite.audit.config.update |  |  |
|  | indykite.audit.config.delete |  |  |
|  | indykite.audit.config.permission.assign |  |  |
|  | indykite.audit.config.permission.revoke |  |  |
|  | **Token Events** |  |  |
| TokenIntrospect | indykite.audit.credentials.token.introspected |  |  |
|  | **Authorization Events** |  |  |
| Authorization | indykite.audit.authorization.isauthorized |  |  |
|  | indykite.audit.authorization.whatauthorized |  |  |
|  | indykite.audit.authorization.whoauthorized |  |  |
|  | **Ciq Events** |  |  |
| Ciq | indykite.audit.ciq.execute |  |  |
|  |  |  |  |

## Example Usage

```terraform
# Note: This file uses variables for sensitive values like passwords and access keys.
# Define these variables in your terraform.tfvars or pass them via environment variables:
# - var.kafka_password_01
# - var.kafka_password_02
# - var.azure_event_grid_access_key
# - var.azure_service_bus_connection_string
# - var.kafka_password
# - var.kafka_prod_password
# - var.azure_grid_access_key
# - var.azure_bus_connection_string
# - var.kafka_audit_password
# - var.kafka_capture_password

# Original example - comprehensive event sink with all provider types (still valid)
resource "indykite_event_sink" "create-event" {
  name         = "terraform-event-sink-${time_static.example.unix}"
  display_name = "Terraform event sink  ${time_static.example.unix}"
  description  = "Event sink for terraform"
  location     = indykite_application_space.appspace.id
  providers {
    provider_name = "kafka-provider-01"
    kafka {
      brokers               = ["kafka-01:9092", "kafka-02:9092"]
      topic                 = "events"
      username              = "my-username"
      password              = var.kafka_password_01
      provider_display_name = "provider-display-name"
    }
  }
  providers {
    provider_name = "kafka-provider-02"
    kafka {
      brokers  = ["kafka-02-01:9092", "kafka-02-02:9092"]
      topic    = "events"
      username = "other-username"
      password = var.kafka_password_02
    }
  }
  providers {
    provider_name = "azuregrid"
    azure_event_grid {
      topic_endpoint = "https://ik-test.eventgrid.azure.net/api/events"
      access_key     = var.azure_event_grid_access_key
    }
  }
  providers {
    provider_name = "azurebus"
    azure_service_bus {
      connection_string   = var.azure_service_bus_connection_string
      queue_or_topic_name = "your-queue"
    }
  }
  routes {
    provider_id     = "kafka-provider-01"
    stop_processing = false
    keys_values_filter {
      event_type = "indykite.audit.config.create"
    }
    route_display_name = "route-display-name"
    route_id           = "route-id"
  }
  routes {
    provider_id     = "kafka-provider-02"
    stop_processing = false
    keys_values_filter {
      key_value_pairs {
        key   = "captureLabel"
        value = "access-granted"
      }
      event_type = "indykite.audit.capture.*"
    }
  }
  routes {
    provider_id     = "azuregrid"
    stop_processing = false
    keys_values_filter {
      event_type = "indykite.audit.config.create"
    }
  }
  routes {
    provider_id     = "azurebus"
    stop_processing = false
    keys_values_filter {
      key_value_pairs {
        key   = "captureLabel"
        value = "access-granted"
      }
      event_type = "indykite.audit.capture.*"
    }
  }
  lifecycle {
    create_before_destroy = true
  }
}

# Example 1: Minimal Kafka event sink with hardcoded location
resource "indykite_event_sink" "minimal_kafka" {
  name     = "minimal-kafka-sink"
  location = "gid:AAAAAmluZHlraURlgAABDwAAAAA"
  providers {
    provider_name = "kafka-main"
    kafka {
      brokers  = ["kafka.example.com:9092"]
      topic    = "indykite-events"
      username = "kafka-user"
      password = var.kafka_password
    }
  }
  routes {
    provider_id = "kafka-main"
    keys_values_filter {
      event_type = "indykite.audit.*"
    }
  }
}

# Example 2: Kafka event sink with reference to application_space
resource "indykite_event_sink" "kafka_with_ref" {
  name         = "kafka-sink-with-ref"
  display_name = "Kafka Sink with Reference"
  description  = "Event sink using application space reference"
  location     = indykite_application_space.my_space.id
  providers {
    provider_name = "kafka-prod"
    kafka {
      brokers               = ["kafka-01.prod.example.com:9092", "kafka-02.prod.example.com:9092"]
      topic                 = "production-events"
      username              = "prod-user"
      password              = var.kafka_prod_password
      provider_display_name = "Production Kafka"
    }
  }
  routes {
    provider_id        = "kafka-prod"
    stop_processing    = true
    route_display_name = "Production Events Route"
    route_id           = "prod-route-01"
    keys_values_filter {
      event_type = "indykite.audit.*"
    }
  }
}

# Example 3: Azure Event Grid sink
resource "indykite_event_sink" "azure_grid" {
  name         = "azure-event-grid-sink"
  display_name = "Azure Event Grid Sink"
  description  = "Event sink for Azure Event Grid"
  location     = indykite_application_space.my_space.id
  providers {
    provider_name = "azure-grid-prod"
    azure_event_grid {
      topic_endpoint = "https://my-topic.eventgrid.azure.net/api/events"
      access_key     = var.azure_grid_access_key
    }
  }
  routes {
    provider_id = "azure-grid-prod"
    keys_values_filter {
      event_type = "indykite.audit.config.*"
    }
  }
}

# Example 4: Azure Service Bus sink
resource "indykite_event_sink" "azure_bus" {
  name         = "azure-service-bus-sink"
  display_name = "Azure Service Bus Sink"
  description  = "Event sink for Azure Service Bus"
  location     = indykite_application_space.my_space.id
  providers {
    provider_name = "azure-bus-prod"
    azure_service_bus {
      connection_string   = var.azure_bus_connection_string
      queue_or_topic_name = "indykite-events"
    }
  }
  routes {
    provider_id = "azure-bus-prod"
    keys_values_filter {
      event_type = "indykite.audit.capture.*"
    }
  }
}

# Example 5: Event sink with multiple routes and filters
resource "indykite_event_sink" "multi_route" {
  name         = "multi-route-sink"
  display_name = "Multi-Route Event Sink"
  description  = "Event sink with multiple routes and complex filtering"
  location     = indykite_application_space.my_space.id
  providers {
    provider_name = "kafka-audit"
    kafka {
      brokers  = ["kafka.example.com:9092"]
      topic    = "audit-events"
      username = "audit-user"
      password = var.kafka_audit_password
    }
  }
  providers {
    provider_name = "kafka-capture"
    kafka {
      brokers  = ["kafka.example.com:9092"]
      topic    = "capture-events"
      username = "capture-user"
      password = var.kafka_capture_password
    }
  }
  routes {
    provider_id        = "kafka-audit"
    stop_processing    = false
    route_display_name = "Audit Events"
    route_id           = "audit-route"
    keys_values_filter {
      event_type = "indykite.audit.config.*"
    }
  }
  routes {
    provider_id        = "kafka-capture"
    stop_processing    = true
    route_display_name = "Capture Events with Label"
    route_id           = "capture-route"
    keys_values_filter {
      key_value_pairs {
        key   = "captureLabel"
        value = "important"
      }
      event_type = "indykite.audit.capture.*"
    }
  }
}

# Note: The location parameter accepts an Application Space ID.
# You must define at least one provider (kafka, azure_event_grid, or azure_service_bus).
# You must define at least one route that references a provider_id.
# The event sink will automatically populate app_space_id and customer_id as computed fields.
# Use lifecycle.create_before_destroy = true to avoid downtime during updates.
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `location` (String) Identifier of Location, where to create resource
- `name` (String) Unique client assigned immutable identifier. Can not be updated without creating a new resource.
- `providers` (Block List, Min: 1) (see [below for nested schema](#nestedblock--providers))
- `routes` (Block List, Min: 1) (see [below for nested schema](#nestedblock--routes))

### Optional

- `description` (String) Your own description of the resource. Must be less than or equal to 65000 UTF-8 bytes.
- `display_name` (String) The display name for the instance. Can be updated without creating a new resource.
- `timeouts` (Block, Optional) (see [below for nested schema](#nestedblock--timeouts))

### Read-Only

- `app_space_id` (String) Identifier of Application Space
- `create_time` (String) Timestamp when the Resource was created. Assigned by the server. A timestamp in RFC3339 UTC "Zulu" format, accurate to nanoseconds. Example: "2014-10-02T15:01:23.045123456Z".
- `customer_id` (String) Identifier of Customer
- `id` (String) The ID of this resource.
- `update_time` (String) Timestamp when the Resource was last updated. Assigned by the server. A timestamp in RFC3339 UTC "Zulu" format, accurate to nanoseconds. Example: "2014-10-02T15:01:23.045123456Z".

<a id="nestedblock--providers"></a>
### Nested Schema for `providers`

Required:

- `provider_name` (String)

Optional:

- `azure_event_grid` (Block List, Max: 1) AzureEventGridSinkConfig (see [below for nested schema](#nestedblock--providers--azure_event_grid))
- `azure_service_bus` (Block List, Max: 1) AzureServiceBusSinkConfig (see [below for nested schema](#nestedblock--providers--azure_service_bus))
- `kafka` (Block List, Max: 1) KafkaSinkConfig (see [below for nested schema](#nestedblock--providers--kafka))

<a id="nestedblock--providers--azure_event_grid"></a>
### Nested Schema for `providers.azure_event_grid`

Required:

- `access_key` (String, Sensitive)
- `topic_endpoint` (String)

Optional:

- `provider_display_name` (String)

Read-Only:

- `last_error` (String) Last error message from the Azure Event Grid sink


<a id="nestedblock--providers--azure_service_bus"></a>
### Nested Schema for `providers.azure_service_bus`

Required:

- `connection_string` (String, Sensitive)
- `queue_or_topic_name` (String)

Optional:

- `provider_display_name` (String)

Read-Only:

- `last_error` (String) Last error message from the Azure Service Bus sink


<a id="nestedblock--providers--kafka"></a>
### Nested Schema for `providers.kafka`

Required:

- `brokers` (List of String) Brokers specify Kafka destinations to connect to.
- `password` (String, Sensitive)
- `topic` (String)
- `username` (String)

Optional:

- `disable_tls` (Boolean) Disable TLS for communication. Highly NOT RECOMMENDED.
- `provider_display_name` (String)
- `tls_skip_verify` (Boolean) Skip TLS certificate verification. NOT RECOMMENDED.

Read-Only:

- `last_error` (String) Last error message from the Kafka sink



<a id="nestedblock--routes"></a>
### Nested Schema for `routes`

Required:

- `provider_id` (String)

Optional:

- `keys_values_filter` (Block List, Max: 1) (see [below for nested schema](#nestedblock--routes--keys_values_filter))
- `route_display_name` (String)
- `route_id` (String)
- `stop_processing` (Boolean)

<a id="nestedblock--routes--keys_values_filter"></a>
### Nested Schema for `routes.keys_values_filter`

Required:

- `event_type` (String)

Optional:

- `key_value_pairs` (Block List) List of key/value pairs for the ingest event types. (see [below for nested schema](#nestedblock--routes--keys_values_filter--key_value_pairs))

<a id="nestedblock--routes--keys_values_filter--key_value_pairs"></a>
### Nested Schema for `routes.keys_values_filter.key_value_pairs`

Required:

- `key` (String) Key for the ingest eventType
- `value` (String) Value for the ingest eventType




<a id="nestedblock--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String)
- `default` (String)
- `delete` (String)
- `read` (String)
- `update` (String)
